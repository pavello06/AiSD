Program Lab1_3;

{$APPTYPE CONSOLE}
{$R *.res}

Uses
    SysUtils;

Const
    DIGITS = ['0'..'9'];
    MIN_LENGTH_LASTNAME = 1;
    MAX_LENGTH_LASTNAME = 20;
    MIN_LENGTH_NUMBER = 1;
    MAX_LENGTH_NUMBER = 20;

Type
    TLastName = String[MAX_LENGTH_LASTNAME];
    TNumber = String[MAX_LENGTH_NUMBER];

    TLinkedList = ^TPerson;

    TPerson = Record
        LastName: TLastName;
        Number: TNumber;
        Next: TLinkedList;
    End;


Function IsValidСharacteristic(Str: String; Const MIN, MAX: Integer; Condition: Boolean) : Boolean;
Begin
    IsValidСharacteristic := (Length(Str) >= MIN) And (Length(Str) <= MAX) And Condition;
End;

Procedure ReadPerson(Var ListOfPeople: TLinkedList);
Var
    IsValid: Boolean;
    TempLastName: TLastName;
    TempNumber: TNumber;
    Num: Integer;
Begin
    IsValid := True;
    Repeat
        WriteLn('Введите фамилию человека (макс 20 символов):');
        ReadLn(TempLastName);
        IsValid := IsValidСharacteristic(TempLastName, MIN_LENGTH_LASTNAME, MAX_LENGTH_LASTNAME, True);
        If Not IsValid Then
            WriteLn('Неверная фамилия!'#1310'Попробуйте снова:');
    Until IsValid;
    Repeat
        WriteLn('Введите номер человека (макс 20 символов):');
        ReadLn(TempNumber);
        IsValid := IsValidСharacteristic(TempLastName, MIN_LENGTH_NUMBER, MAX_LENGTH_NUMBER, TryStrToInt(TempNumber, Num) And (TempNumber <> '-'));
        If Not IsValid Then
            WriteLn('Неверный номер!'#1310'Попробуйте снова:');
    Until IsValid;
    New(ListOfPeople^.Next);
    ListOfPeople := ListOfPeople^.Next;
    ListOfPeople.LastName := TempLastName;
    ListOfPeople.Number := TempNumber;
End;

Procedure MakeListOfPeople(ListOfPeople: TLinkedList);
Var
    TempString: String;
Begin
    WriteLn('Введите фамилии и номера(для прекращения введите ''\0''):');
    ReadPerson(ListOfPeople);
    Repeat
        WriteLn('Нажмите Enter для продолжения (для прекращения введите ''\0''):');
        ReadLn(TempString);
        If TempString <> '\0' Then
            ReadPerson(ListOfPeople);
    Until TempString = '\0';
    ListOfPeople.Next := Nil;
End;



Procedure Search();
Var
    Action: Char;
Begin
    WriteLn('Выберите действие:');
    WriteLn('1 - поиск по фамилии');
    WriteLn('2 - поиск по номеру');
    WriteLn('3 - выход');
    Write('Ваш выбор:');
    ReadLn(Action);
    Case Action Of
    
    End;
End;


Begin

End.
